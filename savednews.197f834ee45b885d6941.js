!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"i",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"a",(function(){return h})),n.d(e,"j",(function(){return f})),n.d(e,"c",(function(){return _}));var o={baseUrl:"".concat("https://nomoreparties.co/news/v2/everything?q="),headers:{authorizationNews:"fca1dff7933b432f82d0c7164dfc70f8"},URL:"".concat("https://api.explorenews.tk")},r=JSON.stringify(o),a=JSON.parse(r),i=864e5,c=100,s="ru",u="https://via.placeholder.com/300",l={statusCardUnLoggedIn:0,statusCardLoggedIn:1,statusCardSaved:2},d=0,h=0,f={firstWord:0,secondWord:1,thirdWord:2},_=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"]},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"signup",(function(t,e,o){return fetch("".concat(n.options.URL,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",withCredentials:!0,body:JSON.stringify({email:t,password:e,name:o})}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))})),r(this,"signin",(function(t,e){return fetch("".concat(n.options.URL,"/signin"),{method:"POST",credentials:"include",withCredentials:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))})),r(this,"deleteArticleById",(function(t){return fetch("".concat(n.options.URL,"/articles/").concat(t),{method:"DELETE",credentials:"include",withCredentials:!0,headers:{"Content-Type":"application/json"}}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))})),r(this,"signout",(function(){return fetch("".concat(n.options.URL,"/signout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",withCredentials:!0}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))})),this.options=e}var e,n,a;return e=t,(n=[{key:"getUserById",value:function(){return fetch("".concat(this.options.URL,"/users/me"),{method:"GET",credentials:"include",withCredentials:!0,headers:{authorization:document.cookie,"Content-Type":"application/json"}}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))}))}},{key:"getArticles",value:function(){return fetch("".concat(this.options.URL,"/articles"),{method:"GET",credentials:"include",withCredentials:!0,headers:{"Content-Type":"application/json"}}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))}},{key:"createArticle",value:function(t){return fetch("".concat(this.options.URL,"/articles"),{method:"POST",credentials:"include",withCredentials:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:t.keyword,title:t.title,text:t.text,date:t.date,source:t.source,link:t.link,image:t.image})}).then((function(t){return t.ok?t.json():Promise.reject("Что-то пошло не так: ".concat(t.status))})).catch((function(t){throw t}))}}])&&o(e.prototype,n),a&&o(e,a),t}()},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=function(){function t(e,n,o){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_addListenerLogout",(function(t){t.addEventListener("click",a._removeListenerLogout)})),r(this,"_removeListenerLogout",(function(t){if(t.target.classList.contains("menu__button")){t.preventDefault();var e=t.currentTarget;a.mainApi.signout().then((function(){e.removeEventListener("click",a._addListenerLogout),location.reload()})).catch((function(t){console.log(t)}))}})),this.arrayMenusHeaderHide=e,this.menuAuthItem=n,this.mainApi=o}var e,n,a;return e=t,(n=[{key:"render",value:function(){var t=this;this.mainApi.getUserById().then((function(e){if(void 0!==e){var n=e.name;t.menuAuthItem.classList.add("menu__item_logoff");var o=t.arrayMenusHeaderHide.length-1;t.arrayMenusHeaderHide.forEach((function(e,r){e.classList.remove("menu__item_logoff"),r===o&&(e.querySelector(".menu__button").textContent=n,t._addListenerLogout(e))}))}})).catch((function(t){console.log(t)}))}},{key:"renderSecondPage",value:function(){var t=this;this.mainApi.getUserById().then((function(e){if(void 0===e)return location="./";t._addListenerLogout(t.menuAuthItem),t.menuAuthItem.textContent=e.name})).catch((function(t){return console.log(t),location="./"}))}}])&&o(e.prototype,n),a&&o(e,a),t}()},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}));var r=function t(e,n,r,a,i,c,s,u){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"addListenersMobMenu",(function(){l.mobMenuButton.addEventListener("click",l.mobMenuOpen)})),o(this,"mobMenuOpen",(function(t){t.preventDefault(),l._swapHeaderTheme()})),o(this,"_swapHeaderTheme",(function(){l.mobMenuButton.classList.toggle("header__menu-mob-icon_exit"),l.nav.classList.toggle("header__section_mob"),l.menuSection.classList.toggle("header__nav_mob"),l.menu.classList.toggle("menu_mob"),l.overflow.classList.toggle("overflow_mob"),l.bodyOverflow.classList.toggle("body-theme_overflowHidden"),l.arrayMenuItem.forEach((function(t){t.classList.toggle("menu__item_mob")})),l.headerLogo.classList.toggle("header__logo_mob")})),this.mobMenuButton=e,this.nav=n,this.menuSection=r,this.menu=a,this.arrayMenuItem=i,this.overflow=c,this.bodyOverflow=s,this.headerLogo=u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(0);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function t(e,n,a,i){var c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_addCard",(function(t){return c.renderPosition.insertAdjacentHTML("beforeEnd",c.newsCard.getTemplate(t,c.statusLogin,c.keyword))})),r(this,"addListeners",(function(){c.renderPosition.addEventListener("click",c.newsCard.saveHandler),c.renderPosition.addEventListener("click",c.newsCard.removeCard)})),r(this,"initCardList",(function(t){c._clearListCard(),c.items=[],c.items.push(t),c.mainApi.getUserById().then((function(t){void 0!==t?(c.statusLogin=o.g.statusCardLoggedIn,c._showMoreArticles()):(c.statusLogin=o.g.statusCardUnLoggedIn,c._showMoreArticles())})).catch((function(t){console.log(t),c._showMoreArticles()}))})),r(this,"initCardListKeyword",(function(t){c.keyword="",c.keyword=t})),r(this,"_showMoreArticles",(function(){var t=0,e=3;if(c.items[o.a].length!==o.f)for(c.buttonShowMore.classList.remove("results__button_disabled"),e+=t;t<e&&t<c.items[o.a].length;t++)c._addCard(c.items[o.a][t]),c.items[o.a].shift();else c.buttonShowMore.classList.add("results__button_disabled")})),r(this,"buttonRender",(function(t){t.preventDefault(),c._showMoreArticles()})),r(this,"_clearListCard",(function(){for(;c.renderPosition.firstChild;)c.renderPosition.removeChild(c.renderPosition.firstChild)})),r(this,"getAllArticles",(function(){c.mainApi.getArticles().then((function(t){c.statusLogin=o.g.statusCardSaved,console.log(t),t.data.forEach((function(t){console.log(t),c._addCard(t)}))})).catch((function(t){console.log(t)}))})),this.newsCard=e,this.renderPosition=n,this.buttonShowMore=a,this.mainApi=i,this.items=[],this.statusLogin=o.g.statusCardUnLoggedIn,this.keyword=""}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n(0);function r(t){var e=new Date(t),n=e.getMonth();return"".concat(e.getDate()," ").concat(function(t,e){for(var n=0;n<=e;n++)if(n===e)return t[n]}(o.c,n),", ").concat(e.getFullYear())}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"saveHandler",(function(t){if(t.target.classList.contains("card__button")){var e=t.target.closest(".card__button"),o=t.target.closest(".card"),r={keyword:n.searchKeyword,title:o.querySelector(".card__title").textContent,text:o.querySelector(".card__text").textContent,date:o.querySelector(".card__date").textContent,source:o.querySelector(".card__source").textContent,link:o.querySelector(".card__link").getAttribute("href"),image:o.querySelector(".card__photo").getAttribute("src")};n.mainApi.createArticle(r).then((function(t){void 0!==t&&e.classList.add("card__button_marked")})).catch((function(t){console.log(t)}))}})),i(this,"removeCard",(function(t){if(t.target.classList.contains("card__button-delete")&&confirm("Are you sure you want to delete this article?")){var e=t.target.closest(".card");n.mainApi.deleteArticleById(e.id).then((function(t){void 0!==t&&e.remove()})).catch((function(t){console.log(t)}))}})),this.mainApi=e,this.searchKeyword=""}var e,n,c;return e=t,(n=[{key:"getTemplate",value:function(t,e,n){this.searchKeyword="",this.searchKeyword=n;var a=null===t.urlToImage?o.b:t.urlToImage;return e===o.g.statusCardUnLoggedIn?'<div class="card">\n        <div class="card__image">\n          <img src="'.concat(this._cleanHtmlUpdate(a),'" alt="').concat(this._cleanHtmlUpdate(t.title),'" class="card__photo">\n          <div class="card__set">\n            <button class="button card__button-tooltip card__button_disabled"><span class="card__button-text card__button_disabled">Войдите, чтобы\n              сохранять статьи</span></button>\n            <button class="button card__button" disabled></button>\n          </div>\n        </div>\n        <a href="').concat(this._cleanHtmlUpdate(t.url),'" target="_blank" class="card__link">\n          <span class="card__date">').concat(this._cleanHtmlUpdate(r(t.publishedAt)),'</span>\n          <h3 class="card__title">').concat(this._cleanHtmlUpdate(t.title),'</h3>\n          <p class="card__text">').concat(this._cleanHtmlUpdate(t.description),'</p>\n          <span class="card__source">').concat(this._cleanHtmlUpdate(t.source.name),"</span>\n        </a>\n      </div>"):e===o.g.statusCardLoggedIn?'<div class="card">\n        <div class="card__image">\n          <img src="'.concat(this._cleanHtmlUpdate(a),'" alt="').concat(this._cleanHtmlUpdate(t.title),'" class="card__photo">\n          <div class="card__set">\n            <button class="button card__button"></button>\n          </div>\n        </div>\n        <a href="').concat(this._cleanHtmlUpdate(t.url),'" target="_blank" class="card__link">\n          <span class="card__date">').concat(this._cleanHtmlUpdate(r(t.publishedAt)),'</span>\n          <h3 class="card__title">').concat(this._cleanHtmlUpdate(t.title),'</h3>\n          <p class="card__text">').concat(this._cleanHtmlUpdate(t.description),'</p>\n          <span class="card__source">').concat(this._cleanHtmlUpdate(t.source.name),"</span>\n        </a>\n      </div>"):e===o.g.statusCardSaved?'<div class="card" id="'.concat(t._id,'">\n        <div class="card__image">\n          <img src="').concat(this._cleanHtmlUpdate(t.image),'" alt="').concat(this._cleanHtmlUpdate(t.title),'" class="card__photo">\n          <div class="card__set">\n            <div class="card__name"><span class="card__name-is">').concat(this._cleanHtmlUpdate(t.keyword),'</span></div>\n            <button class="button card__button-tooltip card__button_disabled"><span class="card__button-saved card__button_disabled">Убрать из сохранённых</span></button>\n            <button class="button card__button-delete"></button>\n          </div>\n        </div>\n        <a href="').concat(this._cleanHtmlUpdate(t.link),'" target="_blank" class="card__link">\n          <span class="card__date">').concat(this._cleanHtmlUpdate(t.date),'</span>\n          <h3 class="card__title">').concat(this._cleanHtmlUpdate(t.title),'</h3>\n          <p class="card__text">').concat(this._cleanHtmlUpdate(t.text),'</p>\n          <span class="card__source">').concat(this._cleanHtmlUpdate(t.source),"</span>\n        </a>\n      </div>"):void 0}},{key:"_cleanHtmlUpdate",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}}])&&a(e.prototype,n),c&&a(e,c),t}()},function(t,e){var n=document.querySelector(".header"),o=document.querySelector(".header__logo"),r=document.querySelectorAll(".menu__item_logoff"),a=document.querySelector(".menu__item_auth"),i=document.querySelector(".header__menu-mob-icon"),c=document.querySelector(".header__section"),s=document.querySelector(".header__nav"),u=document.querySelector(".menu"),l=document.querySelectorAll(".menu__item"),d=document.querySelector(".overflow"),h=document.querySelector(".body-theme"),f=document.querySelector(".search__form"),_=document.querySelector(".search__button"),m=document.querySelector(".results__card-case"),p=document.querySelector(".results"),g=document.querySelector(".results__loading"),y=document.querySelector(".results__nothing"),v=document.querySelector(".results__button"),b=document.querySelector("#authButton"),w=document.querySelector("#popupLogin"),L=document.querySelector("#submitLogin"),S=document.querySelector("#linkToSignup"),C=document.querySelector("#linkToLogin"),A=document.querySelector("#logIn"),k=document.querySelector(".popup__signup"),j=document.querySelector("#submitSignup"),U=document.querySelector("#signUp"),H=document.querySelector(".popup__success"),q=document.querySelector("#successLinkToLogin"),P=document.querySelector(".articles__title"),T=document.querySelectorAll(".articles__keyword");t.exports={headerTheme:n,headerLogo:o,arrayMenusHeaderHide:r,menuAuthItem:a,mobMenuButton:i,nav:c,menuSection:s,menu:u,arrayMenuItem:l,overflow:d,bodyOverflow:h,searchForm:f,searchButton:_,caseCards:m,caseResults:p,loadingNews:g,notFoundNews:y,showMoreButton:v,authButton:b,popupUserLogin:w,loginButton:L,signupLink:S,loginLink:C,popupLoginForm:A,popupUserSignup:k,signupButton:j,popupSignupForm:U,popupSuccessRegister:H,popupSuccessLink:q,articleTitle:P,articleKeywordsArray:T}},,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);n(8);var o=n(0),r=n(2),a=n(1),i=n(5),c=n(4);function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e,n,o){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"getUserInfo",(function(){r.mainApi.getUserById().then((function(t){r.articleTitle.textContent="".concat(t.name,", у вас ").concat(r.countArticle," сохранённых статей")}))})),u(this,"getSaveKeyword",(function(){r.mainApi.getArticles().then((function(t){r.getUserInfo(),void 0!==t&&(r.countArticle=t.data.length,t.data.forEach((function(t){r.keywordsArray.push(t.keyword)})),r.getUserInfo(),r._getPopularKeyword())}))})),u(this,"_getPopularKeyword",(function(){var t={};r.keywordsArray.forEach((function(e){void 0!==t[e]?++t[e]:t[e]=1}));var e=[];for(var n in t)e.push([n,t[n]]);e.sort((function(t,e){return e[1]-t[1]})),r._setPopularWord(e)})),this.mainApi=e,this.articleTitle=n,this.articleKeywordsArray=o,this.countArticle=0,this.keywordsArray=[]}var e,n,r;return e=t,(n=[{key:"_setPopularWord",value:function(t){var e=t.flat(1/0).filter((function(t){return"string"==typeof t}));""!==this.articleKeywordsArray[o.j.secondWord].textContent?(this.articleKeywordsArray[o.j.firstWord].textContent="".concat(e[o.j.firstWord],","),this.articleKeywordsArray[o.j.secondWord].textContent="".concat(e[o.j.secondWord]),this.articleKeywordsArray[o.j.thirdWord].textContent=" и ".concat(e.length-o.j.thirdWord," другим")):(this.articleKeywordsArray[o.j.firstWord].textContent="".concat(e[o.j.firstWord]),this.articleKeywordsArray[o.j.secondWord].textContent="",this.articleKeywordsArray[o.j.thirdWord].textContent=" и ".concat(e.length-o.j.secondWord," другим"))}}])&&s(e.prototype,n),r&&s(e,r),t}(),d=n(3),h=n(6),f=h.headerLogo,_=h.arrayMenusHeaderHide,m=h.menuAuthItem,p=h.mobMenuButton,g=h.nav,y=h.menuSection,v=h.menu,b=h.arrayMenuItem,w=h.overflow,L=h.bodyOverflow,S=h.caseCards,C=h.loadingNews,A=h.notFoundNews,k=h.showMoreButton,j=h.articleTitle,U=h.articleKeywordsArray,H=new a.a(o.h),q=new r.a(_,m,H,C,A),P=new i.a(H),T=new c.a(P,S,k,H),M=new l(H,j,U),x=new d.a(p,g,y,v,b,w,L,f);q.renderSecondPage(),T.getAllArticles(),T.addListeners(),M.getSaveKeyword(),M.getUserInfo(),x.addListenersMobMenu()}]);